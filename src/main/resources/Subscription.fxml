<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.text.Text?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns="http://javafx.com/javafx/8.0.171" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="controllers.SubscriptionController"
            stylesheets="@css/subscription.css" styleClass="root">

    <!-- Top: Header with app name and refresh -->
    <top>
        <VBox>
            <!-- App header -->
            <HBox styleClass="app-header" alignment="CENTER_LEFT">
                <padding>
                    <Insets top="15" right="20" bottom="15" left="20"/>
                </padding>
                <Label text="Subscription Manager" styleClass="app-title"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Button fx:id="btnRefresh" text="â†»" styleClass="icon-button">
                    <tooltip>
                        <Tooltip text="Refresh Data"/>
                    </tooltip>
                </Button>
                <Button fx:id="btnViewPayments"
                        text="ðŸ’³ View Payments"
                        styleClass="primary-button"
                        onAction="#handleViewPayments">
                    <tooltip>
                        <Tooltip text="Show payments for the selected subscription"/>
                    </tooltip>
                </Button>
            </HBox>


            <HBox styleClass="stats-bar" spacing="20">
                <padding>
                    <Insets top="10" right="20" bottom="10" left="20"/>
                </padding>
                <VBox styleClass="stat-box">
                    <Label text="Active Subscriptions" styleClass="stat-label"/>
                    <Label fx:id="labelActiveCount" text="12" styleClass="stat-value"/>
                </VBox>


            </HBox>
        </VBox>
    </top>

    <!-- Center: Main content area -->
    <center>
        <VBox styleClass="content-area">
            <padding>
                <Insets top="20" right="20" bottom="20" left="20"/>
            </padding>

            <!-- Table header with search -->
            <HBox styleClass="table-header" alignment="CENTER_LEFT" spacing="10">
                <Label text="Subscriptions" styleClass="section-title"/>
                <Region HBox.hgrow="ALWAYS"/>
                <TextField fx:id="txtSearch" promptText="Search..." styleClass="search-field"/>
            </HBox>

            <!-- Table -->
            <TableView fx:id="table" styleClass="modern-table" VBox.vgrow="ALWAYS">
                <columnResizePolicy>
                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                </columnResizePolicy>
                <columns>
                    <TableColumn fx:id="colId" text="ID" maxWidth="80" minWidth="50" style="-fx-alignment: CENTER-LEFT;"/>
                    <TableColumn fx:id="colType" text="Type" minWidth="150" style="-fx-alignment: CENTER-LEFT;"/>
                    <TableColumn fx:id="colStart" text="Start Date" minWidth="120" style="-fx-alignment: CENTER-LEFT;"/>
                    <TableColumn fx:id="colEnd" text="End Date" minWidth="120" style="-fx-alignment: CENTER-LEFT;"/>
                    <TableColumn fx:id="colPrice" text="Price" minWidth="100" style="-fx-alignment: CENTER-LEFT;"/>
                </columns>
            </TableView>
        </VBox>
    </center>

    <!-- Bottom: Action buttons -->
    <bottom>
        <HBox styleClass="action-bar" alignment="CENTER_RIGHT" spacing="15">
            <padding>
                <Insets top="15" right="20" bottom="15" left="20"/>
            </padding>
            <Button fx:id="btnDelete" text="Delete" styleClass="delete-button"/>
            <Button fx:id="btnUpdate" text="Edit" styleClass="edit-button"/>
            <Button fx:id="btnCreate" text="Add New Subscription" styleClass="primary-button"/>
        </HBox>
    </bottom>

</BorderPane>